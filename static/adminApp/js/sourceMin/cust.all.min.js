!function(){var a=angular.module("angularFileUpload",[]);a.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer();window.XMLHttpRequest.__isShim&&(d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){e.notify(a)},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&e.notify(a)},!1))}}),a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)});var f=e.promise;return f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(b){b.headers=b.headers||{},b.headers["Content-Type"]=void 0,b.transformRequest=b.transformRequest||a.defaults.transformRequest;var c=new FormData,e=b.transformRequest,f=b.data;return b.transformRequest=function(a,c){if(f)if(b.formDataAppender)for(var d in f){var g=f[d];b.formDataAppender(a,d,g)}else for(var d in f){var g=f[d];if("function"==typeof e)g=e(g,c);else for(var h=0;h<e.length;h++){var i=e[h];"function"==typeof i&&(g=i(g,c))}a.append(d,g)}if(null!=b.file){var j=b.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(b.file))for(var k="[object String]"===Object.prototype.toString.call(j),h=0;h<b.file.length;h++)a.append(k?j:j[h],b.file[h],b.fileName&&b.fileName[h]||b.file[h].name);else a.append(j,b.file,b.fileName||b.file.name)}return a},b.data=c,d(b)},this.http=function(a){return d(a)}}]),a.directive("ngFileSelect",["$parse","$timeout",function(a,b){return function(c,d,e){var f=a(e.ngFileSelect);if("input"!==d[0].tagName.toLowerCase()||"file"!==(d.attr("type")&&d.attr("type").toLowerCase())){for(var g=angular.element('<input type="file">'),h=0;h<d[0].attributes.length;h++)g.attr(d[0].attributes[h].name,d[0].attributes[h].value);d.attr("data-multiple")&&g.attr("multiple","true"),g.css("top",0).css("bottom",0).css("left",0).css("right",0).css("width","100%").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)"),d.append(g),(""===d.css("position")||"static"===d.css("position"))&&d.css("position","relative"),d=g}d.bind("change",function(a){var d,e,g=[];if(d=a.__files_||a.target.files,null!=d)for(e=0;e<d.length;e++)g.push(d.item(e));b(function(){f(c,{$files:g,$event:a})})})}}]),a.directive("ngFileDropAvailable",["$parse","$timeout",function(a,b){return function(c,d,e){if("draggable"in document.createElement("span")){var f=a(e.ngFileDropAvailable);b(function(){f(c)})}}}]),a.directive("ngFileDrop",["$parse","$timeout","$location",function(a,b,c){return function(d,e,f){function g(a){return/^[\000-\177]*$/.test(a)}function h(a,d){var e=[],f=a.dataTransfer.items;if(f&&f.length>0&&f[0].webkitGetAsEntry&&"file"!=c.protocol()&&f[0].webkitGetAsEntry().isDirectory)for(var h=0;h<f.length;h++){var j=f[h].webkitGetAsEntry();null!=j&&(g(j.name)?i(e,j):e.push(f[h].getAsFile()))}else{var k=a.dataTransfer.files;if(null!=k)for(var h=0;h<k.length;h++)e.push(k.item(h))}!function m(a){b(function(){l?m(10):d(e)},a||0)}()}function i(a,b){if(null!=b)if(b.isDirectory){var c=b.createReader();l++,c.readEntries(function(b){for(var c=0;c<b.length;c++)i(a,b[c]);l--})}else l++,b.file(function(b){l--,a.push(b)})}if("draggable"in document.createElement("span")){var j=null;e[0].addEventListener("dragover",function(c){if(c.stopPropagation(),c.preventDefault(),b.cancel(j),!e[0].__drag_over_class_)if(f.ngFileDragOverClass.search(/\) *$/)>-1){dragOverClassFn=a(f.ngFileDragOverClass);var g=dragOverClassFn(d,{$event:c});e[0].__drag_over_class_=g}else e[0].__drag_over_class_=f.ngFileDragOverClass||"dragover";e.addClass(e[0].__drag_over_class_)},!1),e[0].addEventListener("dragenter",function(a){a.stopPropagation(),a.preventDefault()},!1),e[0].addEventListener("dragleave",function(){j=b(function(){e.removeClass(e[0].__drag_over_class_),e[0].__drag_over_class_=null},f.ngFileDragOverDelay||1)},!1);var k=a(f.ngFileDrop);e[0].addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault(),e.removeClass(e[0].__drag_over_class_),e[0].__drag_over_class_=null,h(a,function(b){k(d,{$files:b,$event:a})})},!1);var l=0}}}])}(),!function(a){a.module("dateParser",[]).factory("dateParserHelpers",[function(){"use strict";var a={};return{getInteger:function(b,c,d,e){var f=b.substring(c),g=a[d+"_"+e];g||(g=new RegExp("^(\\d{"+d+","+e+"})"),a[d+"_"+e]=g);var h=g.exec(f);return h?h[1]:null}}}]).factory("$dateParser",["$locale","dateParserHelpers",function(b,c){"use strict";var d=b.DATETIME_FORMATS,e=d.MONTH.concat(d.SHORTMONTH),f=d.DAY.concat(d.SHORTDAY);return function(b,g){if(a.isDate(b))return b;try{if(b+="",g+="",!g.length)return new Date(b);d[g]&&(g=d[g]);for(var h=new Date,i=0,j=0,k="",l=h.getFullYear(),m=h.getMonth()+1,n=h.getDate(),o=0,p=0,q=0,r=0,s="am",t=0,u=!1;j<g.length;){k=g.charAt(j);var v="";if("'"!=g.charAt(j)){for(;g.charAt(j)==k&&j<g.length;)v+=g.charAt(j++);if("yyyy"==v||"yy"==v||"y"==v){var w,x;if("yyyy"==v&&(w=4,x=4),"yy"==v&&(w=2,x=2),"y"==v&&(w=2,x=4),l=c.getInteger(b,i,w,x),null===l)throw"Invalid year";i+=l.length,2==l.length&&(l=l>70?1900+(l-0):2e3+(l-0))}else if("MMMM"===v||"MMM"==v){m=0;for(var y=0;y<e.length;y++){var z=e[y];if(b.substring(i,i+z.length).toLowerCase()==z.toLowerCase()){m=y+1,m>12&&(m-=12),i+=z.length;break}}if(1>m||m>12)throw"Invalid month"}else if("EEEE"==v||"EEE"==v)for(var A=0;A<f.length;A++){var B=f[A];if(b.substring(i,i+B.length).toLowerCase()==B.toLowerCase()){i+=B.length;break}}else if("MM"==v||"M"==v){if(m=c.getInteger(b,i,v.length,2),null===m||1>m||m>12)throw"Invalid month";i+=m.length}else if("dd"==v||"d"==v){if(n=c.getInteger(b,i,v.length,2),null===n||1>n||n>31)throw"Invalid date";i+=n.length}else if("HH"==v||"H"==v){if(o=c.getInteger(b,i,v.length,2),null===o||0>o||o>23)throw"Invalid hours";i+=o.length}else if("hh"==v||"h"==v){if(o=c.getInteger(b,i,v.length,2),null===o||1>o||o>12)throw"Invalid hours";i+=o.length}else if("mm"==v||"m"==v){if(p=c.getInteger(b,i,v.length,2),null===p||0>p||p>59)throw"Invalid minutes";i+=p.length}else if("ss"==v||"s"==v){if(q=c.getInteger(b,i,v.length,2),null===q||0>q||q>59)throw"Invalid seconds";i+=q.length}else if("sss"===v){if(r=c.getInteger(b,i,3,3),null===r||0>r||r>999)throw"Invalid milliseconds";i+=3}else if("a"==v){if("am"==b.substring(i,i+2).toLowerCase())s="AM";else{if("pm"!=b.substring(i,i+2).toLowerCase())throw"Invalid AM/PM";s="PM"}i+=2}else if("Z"==v){if(u=!0,"Z"===b[i])t=0,i+=1;else if(":"===b[i+3]){var C=b.substring(i,i+6);t=60*parseInt(C.substr(0,3),10)+parseInt(C.substr(4,2),10),i+=6}else{var C=b.substring(i,i+5);t=60*parseInt(C.substr(0,3),10)+parseInt(C.substr(3,2),10),i+=5}if(t>720||-720>t)throw"Invalid timezone"}else{if(b.substring(i,i+v.length)!=v)throw"Pattern value mismatch";i+=v.length}}else{for(;"'"!=g.charAt(++j)&&j<g.length;)v+=g.charAt(j);if(b.substring(i,i+v.length)!=v)throw"Pattern value mismatch";i+=v.length,j++}}if(i!=b.length)throw"Pattern value mismatch";if(l=parseInt(l,10),m=parseInt(m,10),n=parseInt(n,10),o=parseInt(o,10),p=parseInt(p,10),q=parseInt(q,10),r=parseInt(r,10),2==m)if(l%4===0&&l%100!==0||l%400===0){if(n>29)throw"Invalid date"}else if(n>28)throw"Invalid date";if((4==m||6==m||9==m||11==m)&&n>30)throw"Invalid date";12>o&&"PM"==s?o+=12:o>11&&"AM"==s&&(o-=12);var D=new Date(l,m-1,n,o,p,q,r);return u?new Date(D.getTime()-6e4*(t+D.getTimezoneOffset())):D}catch(E){return}}}]),a.module("dateParser").directive("dateParser",["dateFilter","$dateParser",function(b,c){"use strict";return{restrict:"A",require:"ngModel",link:function(d,e,f,g){var h;f.$observe("dateParser",function(a){h=a,g.$render()}),g.$parsers.unshift(function(b){var d=c(b,h);return g.$setValidity("date",!b||a.isDate(d)),d}),g.$render=function(){e.val(g.$modelValue?b(g.$modelValue,h):void 0),d.ngModel=g.$modelValue},g.$formatters.push(function(c){return g.$setValidity("date",!c||a.isDate(c)),a.isDate(c)?b(c,h):""})}}}])}(angular),!function(e){"use strict";e.module("dnTimepicker",["ui.bootstrap.position","dateParser"]).factory("dnTimepickerHelpers",function(){return{stringToMinutes:function(e){if(!e)return null;var t=e.match(/(\d+)(h?)/);return t[1]?t[1]*(t[2]?60:1):null},buildOptionList:function(t,i,n){for(var r=[],o=e.copy(t);i>=o;)r.push(new Date(o)),o.setMinutes(o.getMinutes()+n);return r},getClosestIndex:function(t,i){if(!e.isDate(t))return-1;for(var n=null,r=-1,o=60*t.getHours()+t.getMinutes(),c=0;c<i.length;c++){var s=i[c],p=60*s.getHours()+s.getMinutes();(null===n||Math.abs(p-o)<Math.abs(n-o))&&(n=p,r=c)}return r}}}).directive("dnTimepicker",["$compile","$parse","$position","$document","dateFilter","$dateParser","dnTimepickerHelpers","$log",function(t,i,n,r,o,c,s,p){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function(i,a,u,m){function l(e){var t=e.match(/(\d+)(h?)/);return t[1]*(t[2]?60:1)}function d(t){return k||(k=e.isDate(i.ngModel)?i.ngModel:new Date),k.setHours(t.getHours()),k.setMinutes(t.getMinutes()),k.setSeconds(t.getSeconds()),f(k),k}function f(t){e.isDate(t)||(t=c(i.ngModel,i.timepicker.timeFormat),isNaN(t)&&p.warn("Failed to parse model.")),k=t}var k=null,v=!0;i.stringToDate=function(e){if(!e)return null;var t=new Date,i=e.match(/(\d+)(?::(\d\d))?\s*(p|a?)/i);if(!i)return null;var n=parseInt(i[1]);return t.setHours(n+(12==n?i[3]?"p"==i[3].toLowerCase()?0:-12:0:"p"==i[3].toLowerCase()?12:0)),t.setMinutes(parseInt(i[2])||0),t.setSeconds(0),t},i.buildTimeList=function(e,t,i){for(var n=[],r=e;t>=r;)n.push(new Date(r)),r.setMinutes(r.getMinutes()+i);return n};var g=i.stringToDate(u.minTime||i.stringToDate("00:00")),T=i.stringToDate(u.maxTime||i.stringToDate("23:59")),$=l(u.step||"15m");i.timepicker={element:null,timeFormat:"h:mm a",isOpen:!1,activeIdx:-1,optionList:i.buildTimeList(g,T,$)},u.$observe("dnTimepicker",function(e){e&&(i.timepicker.timeFormat=e),m.$render()}),u.$observe("minTime",function(e){e&&(i.timepicker.minTime=c(e,i.timepicker.timeFormat),v=!0)}),u.$observe("maxTime",function(e){e&&(i.timepicker.maxTime=c(e,i.timepicker.timeFormat),v=!0)}),u.$observe("step",function(e){if(e){var t=s.stringToMinutes(e);t&&(i.timepicker.step=t),v=!0}}),i.$watch("ngModel",function(e){f(e?e:new Date),m.$render()}),m.$render=function(){a.val(e.isDate(k)?o(k,i.timepicker.timeFormat):m.$viewValue?m.$viewValue:"")},m.$parsers.unshift(function(t){var n=e.isDate(t)?t:c(t,i.timepicker.timeFormat);return isNaN(n)?void m.$setValidity("time",!1):(m.$setValidity("time",!0),d(n))}),i.select=function(t){e.isDate(t)&&(m.$setViewValue(d(t)),m.$render())},i.isActive=function(e){return e===i.timepicker.activeIdx},i.setActive=function(e){i.timepicker.activeIdx=e},i.scrollToSelected=function(){if(i.timepicker.element&&i.timepicker.activeIdx>-1){var e=i.timepicker.element[0].querySelector(".active");e.parentNode.scrollTop=e.offsetTop-50}},i.openPopup=function(){i.position=n.position(a),i.position.top=i.position.top+a.prop("offsetHeight"),i.timepicker.isOpen=!0,i.timepicker.activeIdx=s.getClosestIndex(i.ngModel,i.timepicker.optionList),i.$digest(),i.scrollToSelected()},i.closePopup=function(){i.timepicker.isOpen&&(i.timepicker.isOpen=!1,i.$apply(),a[0].blur())},a.after(t(e.element("<div dn-timepicker-popup></div>"))(i)),a.bind("focus",function(){i.openPopup()}).bind("keypress keyup",function(e){38===e.which&&i.timepicker.activeIdx>0?(i.timepicker.activeIdx--,i.scrollToSelected()):40===e.which&&i.timepicker.activeIdx<i.timepicker.optionList.length-1?(i.timepicker.activeIdx++,i.scrollToSelected()):13===e.which&&i.timepicker.activeIdx>-1&&(i.select(i.timepicker.optionList[i.timepicker.activeIdx]),i.closePopup()),i.$digest()}),r.bind("click",function(e){i.timepicker.isOpen&&e.target!==a[0]&&i.closePopup()})}}}]).directive("dnTimepickerPopup",[function(){return{restrict:"A",replace:!0,transclude:!1,template:'<ul class="dn-timepicker-popup dropdown-menu" ng-style="{display: timepicker.isOpen && \'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}"><li ng-repeat="time in timepicker.optionList" ng-class="{active: isActive($index) }" ng-mouseenter="setActive($index)" ng-click="select(time)"><a>{{time | date:timepicker.timeFormat}}</a></li></ul>',link:function(e,t,i){e.timepicker.element=t,t.find("a").bind("click",function(e){e.preventDefault()})}}}])}(angular);